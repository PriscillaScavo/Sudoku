{"ast":null,"code":"var _jsxFileName = \"/home/priscilla/Desktop/React/Sudoku/src/components/Game.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport Tile from './Tile';\nimport { nanoid } from \"nanoid\";\nimport Confetti from \"react-confetti\";\nimport Number from './Number';\nimport { generateSudokuGrid, allNumbers, checkWin } from './SudokuApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Game(props) {\n  _s();\n\n  const [sudoku, setSudoku] = useState(JSON.parse(localStorage.getItem(\"sudoku_\" + props.schemeId)) || generateSudokuGrid(props.schemeId));\n  const [numbers, setNumbers] = useState(JSON.parse(localStorage.getItem(\"numbers\" + props.schemeId)) || allNumbers());\n  const [selectTile, setSelectTile] = useState(JSON.parse(localStorage.getItem(\"selectTile\" + props.schemeId)) || '');\n  const [notesMode, setNotesMode] = useState(JSON.parse(localStorage.getItem(\"notesMode\" + props.schemeId)) || false);\n  const [winGame, setWinGame] = useState(false);\n  const sudokuGrid = sudoku.map(s => {\n    return /*#__PURE__*/_jsxDEV(Tile, {\n      id: s.id,\n      value: s.value,\n      r: s.r,\n      c: s.c,\n      isNotInitValue: s.isNotInitValue,\n      fillTile: () => setSelectTile(s),\n      notesMode: s.notesMode,\n      note: s.note\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 13\n    }, this);\n  });\n  const rowNumber = numbers.map(n => {\n    return /*#__PURE__*/_jsxDEV(Number, {\n      number: n.value,\n      id: n.id,\n      count: n.count,\n      selectNumber: () => fillTile(n.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 16\n    }, this);\n  });\n  useEffect(() => {\n    localStorage.setItem(\"notesMode\" + props.schemeId, JSON.stringify(notesMode));\n  }, [notesMode]);\n  useEffect(() => {\n    localStorage.setItem(\"selectTile\" + props.schemeId, JSON.stringify(selectTile));\n  }, [selectTile]);\n  useEffect(() => {\n    const totCount = sudoku.reduce((tot, _ref) => {\n      let {\n        value\n      } = _ref;\n      tot[value] = tot[value] + 1;\n      return tot;\n    }, [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    setNumbers(oldNum => oldNum.map(n => {\n      return { ...n,\n        count: totCount[n.value]\n      };\n    }));\n    localStorage.setItem(\"sudoku_\" + props.schemeId, JSON.stringify(sudoku));\n  }, [sudoku]);\n  React.useEffect(() => {\n    localStorage.setItem(\"numbers\" + props.schemeId, JSON.stringify(numbers));\n\n    if (numbers[0].count === 0) {\n      if (checkWin(sudoku)) {\n        setWinGame(true);\n        console.log(\"YOU WON\");\n      }\n    }\n  }, [numbers]);\n\n  function fillTile(value) {\n    setSudoku(oldSudoku => oldSudoku.map(s => {\n      if (s.id === selectTile.id && s.isNotInitValue) {\n        return notesMode ? { ...s,\n          notesMode: true,\n          note: value,\n          value: ''\n        } : { ...s,\n          notesMode: false,\n          note: '',\n          value: value\n        };\n      } else return s;\n    }));\n  }\n\n  function switchNotesMode() {\n    setNotesMode(old => !old);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [winGame && /*#__PURE__*/_jsxDEV(Confetti, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sudoku-grid\",\n      children: sudokuGrid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"num-grid\",\n      children: rowNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: switchNotesMode,\n      children: notesMode ? \"notes\" : \"write\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Game, \"jNQRXmqhcHrhXau4IvNMX888k90=\");\n\n_c = Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"sources":["/home/priscilla/Desktop/React/Sudoku/src/components/Game.js"],"names":["React","useRef","useEffect","useState","Tile","nanoid","Confetti","Number","generateSudokuGrid","allNumbers","checkWin","Game","props","sudoku","setSudoku","JSON","parse","localStorage","getItem","schemeId","numbers","setNumbers","selectTile","setSelectTile","notesMode","setNotesMode","winGame","setWinGame","sudokuGrid","map","s","id","value","r","c","isNotInitValue","note","rowNumber","n","count","fillTile","setItem","stringify","totCount","reduce","tot","oldNum","console","log","oldSudoku","switchNotesMode","old"],"mappings":"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","sourcesContent":["import React, {useRef, useEffect, useState} from 'react';\nimport Tile from './Tile';\nimport {nanoid} from \"nanoid\"\nimport Confetti from \"react-confetti\"\nimport Number from './Number'\nimport {generateSudokuGrid, allNumbers,checkWin} from './SudokuApi'\n\nexport default function Game(props) {\n    const [sudoku, setSudoku] = useState(JSON.parse(localStorage.getItem(\"sudoku_\" + props.schemeId)) || generateSudokuGrid(props.schemeId))\n    const [numbers, setNumbers] = useState(JSON.parse(localStorage.getItem(\"numbers\" + props.schemeId)) || allNumbers())\n    const [selectTile, setSelectTile] = useState(JSON.parse(localStorage.getItem(\"selectTile\" + props.schemeId)) || '')\n    const [notesMode, setNotesMode] = useState(JSON.parse(localStorage.getItem(\"notesMode\" + props.schemeId)) || false)\n    const [winGame, setWinGame] = useState(false)\n\n    const sudokuGrid = sudoku.map(s =>{\n        return(\n            <Tile\n                id={s.id}\n                value = {s.value}\n                r = {s.r}\n                c = {s.c}\n                isNotInitValue={s.isNotInitValue}\n                fillTile = {() => setSelectTile(s)}\n                notesMode = {s.notesMode}\n                note = {s.note}\n            />)\n        })\n    const rowNumber = numbers.map(n => {\n        return(<Number\n                number={n.value}\n                id={n.id}\n                count={n.count}\n                selectNumber= {() => fillTile(n.value)}  \n                />)\n    })\n    useEffect(() => {\n        localStorage.setItem(\"notesMode\" + props.schemeId, JSON.stringify(notesMode))\n    }, [notesMode])\n       \n    useEffect(() => {\n        localStorage.setItem(\"selectTile\" + props.schemeId, JSON.stringify(selectTile))\n    }, [selectTile])\n    \n    useEffect(() => {\n        const totCount = sudoku.reduce((tot, {value}) => {\n            tot[value] = tot[value] + 1\n            return tot }, [0,0,0,0,0,0,0,0,0,0])\n            \n          setNumbers(oldNum => oldNum.map(n => {\n                return {...n, count: totCount[n.value]} \n            }))       \n            localStorage.setItem(\"sudoku_\" + props.schemeId, JSON.stringify(sudoku)) \n    }, [sudoku])\n\n    React.useEffect(() => {\n        localStorage.setItem(\"numbers\" + props.schemeId, JSON.stringify(numbers))\n        if (numbers[0].count === 0 ) {\n            if(checkWin(sudoku)){\n                setWinGame(true)\n                console.log(\"YOU WON\")\n            }\n        }\n    }, [numbers])\n\n    function fillTile(value){\n        setSudoku(oldSudoku => oldSudoku.map(s => {\n            if(s.id === selectTile.id && s.isNotInitValue) {\n                return notesMode?\n                {...s, notesMode: true,  note: value, value: ''} :\n                {...s, notesMode: false, note : '',value: value} \n            }\n            else\n                return s\n        }))\n    }\n    \n    function switchNotesMode(){\n        setNotesMode(old => !old)\n    }\n\n    return (\n        <main>\n            {winGame && <Confetti />}\n            <div className= \"sudoku-grid\">\n                {sudokuGrid}\n            </div>\n            <div className= \"num-grid\">\n                {rowNumber}\n            </div>\n            <button onClick={switchNotesMode} >{notesMode ? \"notes\" : \"write\"}</button>\n        </main>\n    )\n}"]},"metadata":{},"sourceType":"module"}